<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example TestEm7</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example TestEm7 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>How to produce a Bragg curve in a water phantom.</li>
<li>How to compute the dose in 'test volumes' called tallies.</li>
<li>How to define a maximum step size.</li>
</ul>
<h1><a class="anchor" id="TestEm7_s1"></a>
GEOMETRY DEFINITION</h1>
<p>The geometry consists of a single block of a homogenous material, placed in a world.</p>
<p>Three parameters define the geometry :</p><ul>
<li>the material of the box,</li>
<li>the thickness of the box (sizeX),</li>
<li>the transverse dimension of the box (sizeYZ).</li>
</ul>
<p>The default is 20 cm of water.</p>
<p>In addition a transverse uniform magnetic field can be applied.</p>
<p>The default geometry is constructed in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class, but all of the above parameters can be changed interactively via the commands defined in the <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> class.</p>
<p>The size, matter, positions of several test-volumes (tallies) can be defined via UI commands : /testem/det/tally... <br  />
</p>
<h1><a class="anchor" id="TestEm7_s2"></a>
PHYSICS LIST</h1>
<p>Physics lists can be local (eg. in this example) or from G4 kernel physics_lists subdirectory.</p>
<p>Local physics lists:</p><ul>
<li>"local" standard EM physics with current 'best' options setting. these options are explicited in <a class="el" href="../../d7/d78/classPhysListEmStandard.html">PhysListEmStandard</a></li>
<li>"standardSS" standard EM physics with single Coulomb scattering instead of multiple scattering;</li>
<li>"standardNR" standard EM physics with single Coulomb scattering process <a class="el" href="../../d6/db3/classG4ScreenedNuclearRecoil.html" title="A process which handles screened Coulomb collisions between nuclei.">G4ScreenedNuclearRecoil</a> instead of the multiple scattering for ions with energy less than 100 MeV/nucleon; the new process was developed by M.H. Mendenhall and R.A. Weller from Vanderbuilt University and published in NIM B 277 (2005) 420. In later Geant4 releases the process will be a part of Geant4 source, currently it is released together with its mathematical tool c2_functions in current</li>
</ul>
<p>From geant4/source/physics_lists/builders:</p><ul>
<li>"emstandard_opt0" recommended standard EM physics for LHC</li>
<li>"emstandard_opt1" best CPU performance standard physics for LHC</li>
<li>"emstandard_opt2" similar fast simulation</li>
<li>"emstandard_opt3" best standard EM options - analog to "local" above</li>
<li>"emstandard_opt4" best current advanced EM options standard + lowenergy</li>
<li>"emstandardWVI" standard EM physics and WentzelVI multiple scattering</li>
<li>"emstandardSS" standard EM physics and single scattering model</li>
<li>"emstandardGS" standard EM physics and Goudsmit-Saunderson multiple scatt.</li>
<li>"emlivermore" low-energy EM physics using Livermore data</li>
<li>"empenelope" low-energy EM physics implementing Penelope models</li>
<li>"emlowenergy" low-energy EM physics implementing experimental low-energy models</li>
</ul>
<p><a class="el" href="../../d9/df4/classDecay.html">Decay</a> and <a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> processes are added to each list.</p>
<p>Optional components can be added:</p><ul>
<li>"elastic" elastic scattering of hadrons</li>
<li>"HElastic"</li>
<li>"QElastic"</li>
<li>"binary" <a class="el" href="../../da/dbe/classQBBC.html">QBBC</a> configuration of hadron inelastic models</li>
<li>"binary_ion" Binary ion inelastic models</li>
<li>"ionIoni" Ion gas models</li>
</ul>
<p>Physics lists and options can be (re)set with UI commands</p>
<p>Please, notice that options set through <a class="el" href="../../d7/d22/classG4EmProcessOptions.html">G4EmProcessOptions</a> are global, eg for all particle types. In G4 builders, it is shown how to set options per particle type.</p>
<h1><a class="anchor" id="TestEm7_s3"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic consists of a single particle which hits the block perpendicular to the input face. The type of the particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can changed via the G4 build-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example). The default is a 160 MeV proton.</p>
<p>In addition one can define randomly the impact point of the incident particle. The corresponding interactive command is built in <a class="el" href="../../d2/df6/classPrimaryGeneratorMessenger.html">PrimaryGeneratorMessenger</a> class.</p>
<p>A RUN is a set of events.</p>
<h1><a class="anchor" id="TestEm7_s4"></a>
DOSE IN 'TEST-VOLUMES'</h1>
<p>The energy deposited in the test-volumes (tallies) defined in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> are printed at <a class="el" href="../../d7/df6/classRunAction.html#a49e3c5db63358317c3babca100163bd9">RunAction::EndOfRunAction()</a>, both in MeV and gray.</p>
<h1><a class="anchor" id="TestEm7_s5"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the main () (see <a class="el" href="../../d2/d34/TestEm7_8cc.html" title="Main program of the electromagnetic/TestEm7 example.">TestEm7.cc</a>). The initialisation of the drawing is done via the command </p><pre class="fragment">&gt; /control/execute vis.mac
</pre><p>The detector has a default view which is a longitudinal view of the box.</p>
<p>The tracks are drawn at the end of event, and erased at the end of run. Optionally one can choose to draw all particles, only the charged one, or none. This command is defined in <a class="el" href="../../d9/dc4/classEventActionMessenger.html">EventActionMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm7_s6-"></a>
HOW TO START ?</h1>
<ul>
<li>Execute Test in 'batch' mode from macro files <pre class="fragment">% TestEm7    proton.mac
</pre></li>
<li>Execute Test in 'interactive mode' with visualization <pre class="fragment">% TestEm7 
        ....
Idle&gt; type your commands
        ....
Idle&gt; exit
</pre></li>
</ul>
<h1><a class="anchor" id="TestEm7_s7-"></a>
HISTOGRAM OF THE BRAGG PEAK</h1>
<p>Testem7 computes the total energy deposited along the trajectory of the incident particle : the so-called Bragg peak.</p>
<p>In order to control the accuracy of the deposition, the user can limit the maximum allowed for the step size of charged particles. (command /testem/stepMax )</p>
<p>The result is a 1D histogram, which is the total energy deposited along the trajectory of the incident particle.</p>
<p>The bin size is equal to stepMax. The number of bins is determined by the thickness of the absorber (with a minimum of 100 bins). The total energy deposited is plotted in MeV/mm per incident particle. <br  />
</p>
<p>The next histogram allows to have a zoom around the Bragg peak. Its binning should be defined via UI command: </p><pre class="fragment">/analysis/h1/set 2 nbins xmin xmax unit
</pre><p>The last histogram shows the projectile range. Its bining should be defined similary by the UI command: </p><pre class="fragment">/analysis/h1/set 3 nbins xmin xmax unit
</pre><p>One can control the name of the histograms file with the command: </p><pre class="fragment">/analysis/setFileName  name  (default testem7)
</pre><p>It is possible to choose the format of the histogram file : root (default), xml, csv, by using namespace in HistoManager.hh</p>
<p>It is also possible to print selected histograms on an ascii file: </p><pre class="fragment"> /analysis/h1/setAscii id
</pre><p> All selected histos will be written on a file name.ascii (default testem7) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
