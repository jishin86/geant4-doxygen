<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example Activation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example Activation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Survey energy deposition and particle's flux from an hadronic cascade, including radioactive decays. The main purpose of the example is to plot evolution of each metastable isomer as a function of time, taking into account the time of exposure in the beam. Also plot the activity of emerging particles. Use PhysicsConstructor objects rather than predefined G4 PhysicsLists.</p>
<h1><a class="anchor" id="Activation_s1"></a>
MATERIALS AND GEOMETRY DEFINITION</h1>
<p>The "absorber" is a box made of a given material. <br  />
</p>
<p>Three parameters define the absorber :</p><ul>
<li>the material of the absorber</li>
<li>the thickness of an absorber</li>
<li>the transverse size of the absorber (the input face is a square)</li>
</ul>
<p>The volume "World" contains the "absorber".</p>
<p>A function, and its associated UI command, allows to build a material directly from a single isotope.</p>
<p>To be identified by the ThermalScattering module, the elements composing a material must have a specific name (see <a class="el" href="../../dd/d9f/G4ParticleHPThermalScatteringNames_8cc.html">G4ParticleHPThermalScatteringNames.cc</a>) Examples of such materials are build in <a class="el" href="../../dc/d5b/classDetectorConstruction.html#a5c3bcd347659ea1931b858bc128c54a2">DetectorConstruction::DefineMaterials()</a>.</p>
<h1><a class="anchor" id="Activation_s2"></a>
PHYSICS LIST</h1>
<p>The physics list contains a "full" set of physics processes. It is defined in the <a class="el" href="../../d2/daa/classPhysicsList.html">PhysicsList</a> class as a Geant4 modular physics list with registered physics constructors (builders).</p>
<p>Physics constructors are either constructors provided in Geant4 (with G4 prefix) or 'local'. They include : HadronElastic, HadronInelastic, IonsInelastic, GammaNuclear, RadioactiveDecay and Electomagnetic. (see geant4/source/physics_lists/constructors)</p>
<p><a class="el" href="../../d5/d9c/classHadronElasticPhysicsHP.html">HadronElasticPhysicsHP</a> include a model for thermalized neutrons, under the control of a command defined in NeutronHPMesseger.</p>
<p>GammmaNuclearPhysics is a subset of <a class="el" href="../../d4/d8a/classG4BertiniElectroNuclearBuilder.html">G4BertiniElectroNuclearBuilder</a>.</p>
<p><a class="el" href="../../d4/d6b/classElectromagneticPhysics.html">ElectromagneticPhysics</a> is a simplified version of <a class="el" href="../../d6/da3/classG4EmStandardPhysics.html">G4EmStandardPhysics</a>. In particular, no step constraint is imposed for energy loss mechanism (ionisation and brems). This is enough when spatial distribution of deposited energy do not need to be accurate (see param-&gt;SetStepFunction(1., 1*mm)).</p>
<p>Several hadronic physics options are controlled by environment variables. To trigger them, the envHadronic.csh script has been added in this example. One must select the options wished, and do </p><pre class="fragment">source envHadronic.csh  (or sh)
</pre><p> <br  />
</p>
<h1><a class="anchor" id="Activation_s3"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic is a single particle which hits the absorber perpendicular to the input face. The type of particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can be changed via the G4 build-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example).</p>
<p>One can control the transverse size of the beam. The command </p><pre class="fragment">/testhadr/gun/beamSize
</pre><p> is built in <a class="el" href="../../d2/df6/classPrimaryGeneratorMessenger.html">PrimaryGeneratorMessenger</a> class.</p>
<p>The time of exposure in the beam may be finite. It is controled by the command </p><pre class="fragment">/testhadr/gun/beamTime.
</pre><p> Then the time zero of each event is randomly chosen within this interval.</p>
<h1><a class="anchor" id="Activation_s4"></a>
PHYSICS</h1>
<p>The program computes and plots energy deposited in the interaction volume (absorber), energy spectrum and activity of particles leaving the absorber, and evolution of population of metastable isomers within the absorber (see below : histograms). Processes invoked and particles generated during interactions are listed.</p>
<h1><a class="anchor" id="Activation_s5"></a>
HISTOGRAMS</h1>
<p>The test contains 43 built-in 1D histograms, which are managed by G4AnalysisManager and its Messenger. The histos can be individually activated with the command : </p><pre class="fragment">/analysis/h1/set id nbBins  valMin valMax unit
</pre><p> where unit is the desired unit for the histo (MeV or keV, etc..) (see the macros xxxx.mac). </p><pre class="fragment">     1     "total energy deposit"
     2     "Edep (MeV/mm) profile along beam direction"            
     3     "total kinetic energy emerging"
     4     "energy spectrum of emerging gamma"
     5     "energy spectrum of emerging e+-"
     6     "energy spectrum of emerging neutrons"
     7     "energy spectrum of emerging protons"
     8     "energy spectrum of emerging deuterons"
     9     "energy spectrum of emerging alphas"
     10    "energy spectrum of all others emerging ions"
     11    "energy spectrum of all others emerging baryons"
     12    "energy spectrum of all others emerging mesons"
     13    "energy spectrum of all others emerging leptons (neutrinos)" 
     14    "dN/dt (becquerel) of emerging gamma"
     15    "dN/dt (becquerel) of emerging e+-"
     16    "dN/dt (becquerel) of emerging neutrons"
     17    "dN/dt (becquerel) of emerging protons"
     18    "dN/dt (becquerel) of emerging deuterons"
     19    "dN/dt (becquerel) of emerging alphas"
     20    "dN/dt (becquerel) of all others emerging ions"
     21    "dN/dt (becquerel) of all others emerging baryons"
     22    "dN/dt (becquerel) of all others emerging mesons"
     23    "dN/dt (becquerel) of all others emerging leptons (neutrinos)"
</pre><p>Histograms 24 to 43 are assigned to population of metastable isomer. Here, Â´metastable' means time life &gt; 0.</p>
<p>The type and number of isomers created in a run cannot be predicted in advance. Therefore the assignation : isomer &lt;--&gt; histo_Id is done on fly and printed at end of run. A lock mechanism is necessary in MT mode; see Run.cc</p>
<p>Activation and binning control of histograms is done with the usual command </p><pre class="fragment">/analysis/h1/set 
</pre><p>One can control the name of the histograms file with the command: </p><pre class="fragment">/analysis/setFileName  name  (default Activation)
</pre><p>It is possible to choose the format of the histogram file : root (default), xml, csv, by using namespace in HistoManager.hh</p>
<p>It is also possible to print selected histograms on an ascii file: </p><pre class="fragment">/analysis/h1/setAscii id
</pre><p> All selected histos will be written on a file name.ascii (default Activation)</p>
<h1><a class="anchor" id="Activation_s6"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the <a class="el" href="../../d8/d8f/genwindef_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a>. The initialisation of the drawing is done via the commands /vis/... in the macro vis.mac. To get visualisation: </p><pre class="fragment">&gt; /control/execute vis.mac
</pre><p>The tracks are drawn at the end of event, and erased at the end of run. <br  />
 gamma green <br  />
 neutron yellow negative particles (e-, ...) red positive particles (e+, ions, ...) blue</p>
<h1><a class="anchor" id="Activation_s7"></a>
HOW TO START ?</h1>
<p>Execute Activation in 'batch' mode from macro files : </p><pre class="fragment">% ./Activation   run1.mac
</pre><p>Execute Activation in 'interactive mode' with visualization : </p><pre class="fragment">% ./Activation
Idle&gt; control/execute vis.mac
....
Idle&gt; type your commands
....
Idle&gt; exit
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
