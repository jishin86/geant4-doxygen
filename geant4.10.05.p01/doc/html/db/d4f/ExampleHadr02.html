<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example Hadr02</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example Hadr02 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Example and DMJET: </p><dl class="section author"><dt>Author</dt><dd>V.Ivanchenko, A.Ivanchenko, <br  />
UrQMD: Kh Abdel-Waged et al, A. Dotti <br  />
CERN, Geneva, Switzerland <br  />
Geant4 Associate International <br  />
University of Bordeaux, CENBG/IN2P3/CNRS <br  />
(ESA contract 22712/09/NL/AT)</dd></dl>
<p>This example application is providing simulation of ion beam interaction with different targets. Hadronic aspects of beam target interaction are demonstrated in the example including longitudinal profile of energy deposition, spectra of secondary particles, isotope production spectra. The results are presenting in a form of average numbers and histograms. All ion/ion models of Geant4 are available and also the interface to the FORTRAN code DPMJET-2.5 developed by J.Ranft for FLUKA. The interface was developed by P.Truscott (QinetiQ, UK) under European Space Agency (ESA) contract 19770/06/NL/JD. In addition an interface to the FORTRAN code UrQMD-1.3rc developed by Kh, Abdel-Waged et al for the KACST/NCMP. UrQMD model by S.A.Bass et al. Prog.Part.Nucl.Phys. 41 (1998) 225 and M.Bleicher et al. J.Phys. G25 (1999) 1859. UrQMD can be used only for ion-ion physics or for all hadronic inelastic interactions.</p>
<h1><a class="anchor" id="Hadr02_s1"></a>
INSTALLATION</h1>
<p>For simulation with Geant4 native models installation procedure is the same as for other examples.</p>
<h2><a class="anchor" id="Hadr02_sub_s11"></a>
ACTIVATION OF DPMJET INTERFACE</h2>
<p>In order to use DPMJET additional installation steps are required. It is recommended to use DPMJET with SLC5 64 bit PC with gcc4.3.2 or newer compiler.</p>
<p>Two environment variables should be defined:</p>
<pre class="fragment">G4DPMJET2_5DATA - path to Glauber data
CERNLIB         - path to cernlib library
G4_USE_DPMJET   - flag of DPMJET activation
</pre><p>To run the example with DPMJET:</p>
<pre class="fragment">Hadr02 dpmjet.in QGSP_BIC
</pre><p>The last parameter is optional. It is the name of Geant4 reference Physics List on top of which a new ion physics is added. Alternatively Physics List can be defined via environment variable</p>
<pre class="fragment">setenv PHYSLIST QGSP_BIC
</pre><h2><a class="anchor" id="Hadr02__sub_s12"></a>
ACTIVATION OF URQMD INTERFACE</h2>
<p>UrQMD 1.3 FORTRAN code is NOT provided with Geant4 code-base. You can get UrQMD code from UrQMD code website: <a href="http://urqmd.org">http://urqmd.org</a> The Geant4 interface has been developed and tested against urqmd-1.3cr Once the tarball urqmd-1.3cr.tar.gz has been downloaded copy it in the urqmd1_3 directory of this example. To compile support for UrQMD interface in the example define the environment variable G4_USE_URQMD. i.e. by typing:</p>
<pre class="fragment">setenv G4_USE_URQMD 1
</pre><p>Two possible uses of UrQMD interface are possible: use UrQMD code only for ion-ion interactions or use the provided UrQMD physics list (all hadron inelastic interactions use UrQMD). To run the example with UrQMD only for ion-ion physics:</p>
<pre class="fragment">Hadr02 urqmd.in QGSP_BIC
</pre><p>The last parameter is optional. It is the name of Geant4 reference Physics List on top of which a new ion physics is added. Alternatively Physics List can be defined via environment variable</p>
<pre class="fragment">setenv PHYSLIST QGSP_BIC
</pre><p>To run the example with the full UrQMD physics:</p>
<pre class="fragment">Hadr02 default.in UrQMD
</pre><p> or: </p><pre class="fragment">setenv PHYSLIST UrQMD
Hadr02 default.in
</pre><p>UrQMD physics list can be used in any application, releavant headers and source files (<em>UrQDM</em>) should be copied in your application source tree, together with the urqmd1_3 sub-directory. Your application makefile should also be modified following the example of the makefile for this example.</p>
<h1><a class="anchor" id="Hadr02_s2"></a>
GEOMETRY</h1>
<p>The Target volume is a cylinder placed inside Check cylindrical volume. The Check volume is placed inside the World volume. The radius and the length of the Check volume are 1 mm larger than the radius and the length of the Target. The material of the Check volume is the same as the World material. The World volume has the sizes 10 mm larger than that of the Target volume. Any material from the Geant4 database can be defined. The default World material is G4Galactic and the default Target material is aluminum. The Target is subdivided on number of equal slices. Following UI commands are available to modify the geometry:</p>
<pre class="fragment">/testhadr/TargetMat     G4_Pb
/testhadr/WorldMat      G4_AIR
/testhadr/TargetRadius  10 mm
/testhadr/TargetLength  20 cm
/testhadr/NumberDivZ    200
</pre><p>Beam direction coincides with the target axis and is Z axis in the global coordinate system. <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> is used as a primary generator. The energy and the type of the beam can be defined via standard UI commands</p>
<pre class="fragment">/gun/energy   150 GeV
/gun/particle ion
/gun/ion 6 12
</pre><p>Default beam position is -(targetHalfLength + 5*mm) and direction along Z axis. Beam position and direction can be changed by gun UI commands:</p>
<pre class="fragment">/gun/position  1 10 3 mm
/gun/direction 1 0 0
</pre><p>however, position command is active only if before it the flag is set</p>
<pre class="fragment">/testhadr/DefaultBeamPosition false   
</pre><h1><a class="anchor" id="Hadr02_s3"></a>
SCORING</h1>
<p>The scoring is performed with the help of UserStackingAction class and a sensitive detector class associated with a target slice. Each secondary particle is scored by the <a class="el" href="../../d4/d47/classStackingAction.html" title="Stacking action class : manage the newly generated particles.">StackingAction</a>. In the <a class="el" href="../../d4/d47/classStackingAction.html" title="Stacking action class : manage the newly generated particles.">StackingAction</a> it is also possible to kill all or only EM (e+, e-, gamma) secondary particles</p>
<pre class="fragment">/testhadr/killAll     
/testhadr/KillEM  
</pre><p>To control running the following options are available:</p>
<pre class="fragment">/run/printProgress      10
</pre><h1><a class="anchor" id="Hadr02_s4"></a>
PHYSICS</h1>
<p><a class="el" href="../../d2/daa/classPhysicsList.html">PhysicsList</a> of the application uses components, which are distributed with Geant4 in /geant4/physics_lists subdirectory.</p>
<p>Reference Physics Lists are used and the environment variable PHYSLIST should be defined.</p>
<p>Additionally it is possible to add ion-ion interactions using UI command</p>
<pre class="fragment">/testhadr/ionPhysics   DPMJET
/testhadr/ionPhysics   FTF
</pre><h1><a class="anchor" id="Hadr02_s5"></a>
VISUALIZATION</h1>
<p>For interactive mode G4 visualization options and variables should be defined, then the example should be recompiled:</p>
<pre class="fragment">gmake visclean
gmake
</pre><p>The vis.mac file can be used an example of visualization. The following command can be used:</p>
<pre class="fragment">/testhadr/DrawTracks  charged
/testhadr/DrawTracks  charged+n
/testhadr/DrawTracks  neutral
/testhadr/DrawTracks  all
</pre><h1><a class="anchor" id="Hadr02_s6"></a>
HISTOGRAMS</h1>
<p>To use histograms any of implementations of <a class="el" href="../../db/d59/namespaceAIDA.html">AIDA</a> interfaces should be available (see <a href="http://aida.freehep.org">http://aida.freehep.org</a>).</p>
<p>A package including <a class="el" href="../../db/d59/namespaceAIDA.html">AIDA</a> and extended interfaces also using Python is PI, available from: <a href="http://cern.ch/pi">http://cern.ch/pi</a> .</p>
<p>Once installed PI or PI-Lite in a specified local area $PI_DIR, it is required to add the installation path to $PATH, i.e. for example, for release 1.2.1 of PI:</p>
<p>setenv PATH ${PATH}:$PI_DIR/1.3.12/app/releases/PI/PI_1_3_12/slc3_gcc323/bin</p>
<p>CERN users can use the PATH to the LCG area on AFS.</p>
<p>Before compilation of the example it is optimal to clean up old files:</p>
<pre class="fragment">gmake histclean
setenv G4ANALYSIS_USE 1
gmake
</pre><p>Before running the example the command should be issued:</p>
<pre class="fragment">eval `aida-config --runtime csh`
</pre><p>It is possible to choose the format of the output file with histograms using UI command:</p>
<pre class="fragment">/testhadr/HistoName   name
/testhadr/HistoType   type
</pre><p>The following types are available: hbook, root, aida. They will be stored in the file "name.hbook", "name.root", or "name.aida". If the environment variable HISTODIR is defined, files are stored in this subdirectory.</p>
<p>To show the content of a histogram ID=i the commands may be applied:</p>
<pre class="fragment">/testhadr/HistoPrint  i
</pre><p>All histograms are normalized to the number of events. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
