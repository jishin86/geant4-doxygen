<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example Par02</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example Par02 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example is a simplified version of a Geant4-based fast simulation program written by Anna Zaborowska for Future Circular Collider (FCC) studies.</p>
<p>This example shows how to do "track and energy smearing" in Geant4, in order to have a very fast simulation based on assumed detector resolutions.</p>
<p>The geometry which is considered is a simplified collider detector set-up, inspired by ALEPH/ATLAS/CMS detectors. Although it is much simpler than a realistic detector, it is anyhow fairly complex and therefore build up from a GDML file, Par02FullDetector.gdml .</p>
<p>In this example:</p><ul>
<li><a class="el" href="../../de/d20/classParticles.html">Particles</a> with transverse momentum less than 1 MeV or pseudorapidity larger (in module) than 5.5 are neglected (i.e. the corresponding Geant4 track is killed as soon as it is created).</li>
<li>Any primary charged particle is smeared in the tracker as follows: its momentum is smeared according to a gaussian, with mean equal to 1.0 and sigma taken from the momentum resolution of the CMS tracker (with ALEPH or ATLAS tracker as a possible alternative), and then placed at the end of the tracker, at the position that it would reach if normally transported (i.e. without smearing).</li>
<li>Any primary electron, or positron, or gamma is smeared in the electromagnetic calorimeter as follows: it is killed at the entrance of the electromagnetic calorimeter, with a deposited energy equal to the gaussian smearing (with mean equal to 1.0 and sigma taken from the energy resolution of the CMS electromagnetic calorimeter - with ALEPH or ATLAS electromagnetic calorimeter as a possible alternative) of its kinetic energy (at the entrance of the electromagnetic calorimeter).</li>
<li>Any primary hadron is smeared in the hadronic calorimeter as follows: it is killed at the entrance of the hadronic calorimeter, with a deposited energy equal to the gaussian smearing (with mean equal to 1.0 and sigma taken from the energy resolution of the CMS hadronic calorimeter - with ALEPH or ATLAS hadronic calorimeter as a possible alternative) of its kinetic energy (at the entrance of the hadronic calorimeter).</li>
<li>The only competing physical processes with respect to the above physics parametrisations are the decays. Note: no electromagnetic processes; no momentum smearing in the tracker for secondary particles; secondary electrons, positrons, gammas in the electromagnetic calorimeter are killed (at the entrance) but without any energy deposition; secondary hadrons in the hadronic calorimeter are killed (at the entrance) but without any energy deposition.</li>
</ul>
<p>Below some details.</p>
<h1><a class="anchor" id="Par02_s1"></a>
Detector description</h1>
<p>The geometry is read in from a GDML file, Par02FullDetector.gdml .</p>
<p>The geometry is a simplified collider detector set-up used for the first FCC studies, inspired by ALEPH/ATLAS/CMS detectors. It is made of 4 main parts:</p><ul>
<li>Tracker</li>
<li>Electromagnetic calorimeter</li>
<li>Hadronic calorimeter</li>
<li>Muon subdetector</li>
</ul>
<p>In this example, fast simulation parametrisation models exist for the first three subdetectors, but not for the Muon subdetector. The three parametrisation models:</p><ul>
<li><a class="el" href="../../df/dd1/classPar02FastSimModelTracker.html" title="Shortcut to the ordinary tracking for tracking detectors.">Par02FastSimModelTracker</a> : in the tracker</li>
<li><a class="el" href="../../dd/d1a/classPar02FastSimModelEMCal.html" title="Shortcut to the ordinary tracking for electromagnetic calorimeters.">Par02FastSimModelEMCal</a> : in the electromagnetic calorimeter</li>
<li><a class="el" href="../../de/dc6/classPar02FastSimModelHCal.html" title="Shortcut to the ordinary tracking for hadronic calorimeters.">Par02FastSimModelHCal</a> : in the hadronic calorimeter are build and bound to the respective subdetector (i.e. Geant4 regions) in the method: <a class="el" href="../../d4/d7c/classPar02DetectorConstruction.html#a326f28d50df8cae0b9f68547abebac5c" title="A method invoked by G4RunManager::Initialize()">Par02DetectorConstruction::Construct()</a> .</li>
</ul>
<p>Three configurations are possible for those parametrisation models: CMS-like, ALEPH-like, ATLAS-like. By default, the CMS configuration is used.</p>
<h1><a class="anchor" id="Par02_s2"></a>
Primary generation</h1>
<p>In this example we use a very simple primary generation action, <a class="el" href="../../d9/d2e/classPar02PrimaryGeneratorAction.html" title="Construction of a primary generation action.">Par02PrimaryGeneratorAction</a>, that uses the <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a>. One single particle type, with a well defined energy, and in one fixed direction is used for each run: the corresponding values can be set via macro commands. See examplePar02.in as an example.</p>
<p>For the FCC studies, Pythia8 events in HepMC format were used for the generation of the primary particles.</p>
<h1><a class="anchor" id="Par02_s3"></a>
Physics List</h1>
<p>A special, ad-hoc physics list is used in this example, in order to have an ultra-fast parametrised simulation: for all particles, the only two physics processes that are assigned are the decay process and the fast simulation process. The following three fast simulation models are defined:</p>
<ul>
<li><a class="el" href="../../df/dd1/classPar02FastSimModelTracker.html" title="Shortcut to the ordinary tracking for tracking detectors.">Par02FastSimModelTracker</a> :<ul>
<li>bound to the tracker (see the method <a class="el" href="../../d4/d7c/classPar02DetectorConstruction.html#a326f28d50df8cae0b9f68547abebac5c" title="A method invoked by G4RunManager::Initialize()">Par02DetectorConstruction::Construct</a> )</li>
<li>applicable to all charged particles (see the method <a class="el" href="../../df/dd1/classPar02FastSimModelTracker.html#aa8fe330c70884afe6a8834f2699e941c" title="Checks if this model should be applied to this particle type.">Par02FastSimModelTracker::IsApplicable</a> )</li>
<li>triggered in all cases (i.e. no kinematic constraints) (see the method <a class="el" href="../../df/dd1/classPar02FastSimModelTracker.html#a141fa6578cb49dea9afd514421923e92" title="Checks if the model should be applied taking into account the kinematics of a track.">Par02FastSimModelTracker::ModelTrigger</a> )</li>
<li>does the following: place the particle at the tracking detector exit (at the place the particle would reach without smearing), and, only if the particle is a primary, it smears the momentum of the particle according to a gaussian, with mean equal to 1.0 and sigma taken from the momentum resolution of the CMS tracker (with ALEPH or ATLAS tracker as a possible alternative) (see the method <a class="el" href="../../df/dd1/classPar02FastSimModelTracker.html#a18180da7f5ef364354ef46364fc9f558" title="Calculates the final position (at the outer boundary of the tracking detector) of a particle with the...">Par02FastSimModelTracker::DoIt</a> )</li>
</ul>
</li>
<li><a class="el" href="../../dd/d1a/classPar02FastSimModelEMCal.html" title="Shortcut to the ordinary tracking for electromagnetic calorimeters.">Par02FastSimModelEMCal</a> :<ul>
<li>bound to the electromagnetic calorimeter (see the method <a class="el" href="../../d4/d7c/classPar02DetectorConstruction.html#a326f28d50df8cae0b9f68547abebac5c" title="A method invoked by G4RunManager::Initialize()">Par02DetectorConstruction::Construct</a> )</li>
<li>applicable to electrons, positrons, gammas (see the method <a class="el" href="../../dd/d1a/classPar02FastSimModelEMCal.html#a78f9c53669acf12caefb4b5ecd3d60ae" title="Checks if this model should be applied to this particle type.">Par02FastSimModelEMCal::IsApplicable</a> )</li>
<li>triggered in all cases (i.e. no kinematic constraints) (see the method <a class="el" href="../../dd/d1a/classPar02FastSimModelEMCal.html#a45c73ca487019519bb24d73a6818bf0c" title="Checks if the model should be applied, taking into account the kinematics of a track.">Par02FastSimModelEMCal::ModelTrigger</a> )</li>
<li>does the following: kill the particle at the entrance of the electromagnetic calorimeter, and, only if the particle is a primary, it deposits in the electromagnetic calorimeter an energy obtained by a gaussian smearing (with mean equal to 1.0 and sigma taken from the energy resolution of the CMS electromagnetic calorimeter - with ALEPH or ATLAS electromagnetic calorimeter as a possible alternative) of the particle kinetic energy (at the entrance of the electromagnetic calorimeter) (see the method <a class="el" href="../../dd/d1a/classPar02FastSimModelEMCal.html#a5f889c290f0c0ec282ce6b312482b1db" title="Smears the energy deposit and saves it, together with the position of the deposit,...">Par02FastSimModelEMCal::DoIt</a> )</li>
</ul>
</li>
<li><a class="el" href="../../de/dc6/classPar02FastSimModelHCal.html" title="Shortcut to the ordinary tracking for hadronic calorimeters.">Par02FastSimModelHCal</a> :<ul>
<li>bound to the hadronic calorimeter (see the method <a class="el" href="../../d4/d7c/classPar02DetectorConstruction.html#a326f28d50df8cae0b9f68547abebac5c" title="A method invoked by G4RunManager::Initialize()">Par02DetectorConstruction::Construct</a> )</li>
<li>applicable to all hadrons (i.e. particles made of quarks) (see the method <a class="el" href="../../de/dc6/classPar02FastSimModelHCal.html#a728ca57cb609095e1f5ba0a891445d21" title="Checks if this model should be applied to this particle type.">Par02FastSimModelHCal::IsApplicable</a> )</li>
<li>triggered in all cases (i.e. no kinematic constraints) (see the method <a class="el" href="../../de/dc6/classPar02FastSimModelHCal.html#a0116f28cf5de597f78f88e5fbc9a6e2a" title="Checks if the model should be applied, taking into account the kinematics of a track.">Par02FastSimModelHCal::ModelTrigger</a> )</li>
<li>does the following: kill the particle at the entrance of the hadronic calorimeter, and, only if the particle is a primary, it deposits in the hadronic calorimeter an energy obtained by a gaussian smearing (with mean equal to 1.0 and sigma taken from the energy resolution of the CMS hadronic calorimeter - with ALEPH or ATLAS hadronic calorimeter as a possible alternative) of the particle kinetic energy (at the entrance of the hadronic calorimeter) (see the method <a class="el" href="../../de/dc6/classPar02FastSimModelHCal.html#a01c9ccc2b87ef71353e2eedc0ba9abc8" title="Smears the energy deposit and saves it, together with the position of the deposit,...">Par02FastSimModelHCal::DoIt</a> )</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="Par02_s4"></a>
User actions, user information and user utility classes</h1>
<ul>
<li><a class="el" href="../../d1/d4d/classPar02RunAction.html" title="Run action (before/after run processing).">Par02RunAction</a> : run action used for initialization and termination of the run.</li>
<li><a class="el" href="../../d5/dd8/classPar02EventAction.html" title="Event action (before/after event processing).">Par02EventAction</a> : event action used for initialization and termination of the event.</li>
<li><a class="el" href="../../dc/db6/classPar02TrackingAction.html" title="Tracking action (before/after track processing).">Par02TrackingAction</a> : tracking action used for killing particles with transverse momentum less than 1 MeV or pseudorapidity larger (in module) than 5.5 (see method <a class="el" href="../../dc/db6/classPar02TrackingAction.html#a4966723cf2ed7bc25cb3012824464322" title="Defines the actions at the start of processing the track.">Par02TrackingAction::PreUserTrackingAction</a> ) and to store the information about the track at the end of the simulation of such a track (see method <a class="el" href="../../dc/db6/classPar02TrackingAction.html#a4f5a64a0c31e4d5abb2327c5701f11fd" title="Defines the actions at the end of processing the track.">Par02TrackingAction::PostUserTrackingAction</a> ).</li>
<li><a class="el" href="../../df/dde/classPar02ActionInitialization.html" title="Actions initialization.">Par02ActionInitialization</a> : initialization of the primary generator class and all user-defined actions (i.e. the three classes above).</li>
<li><a class="el" href="../../db/d52/classPar02PrimaryParticleInformation.html" title="Primary particle information.">Par02PrimaryParticleInformation</a> : utility class to store information associated with a primary particle.</li>
<li><a class="el" href="../../dc/d0c/classPar02EventInformation.html" title="Event information.">Par02EventInformation</a> : utility class to store information associated with a Geant4 event.</li>
<li><a class="el" href="../../dc/dad/classPar02DetectorParametrisation.html" title="Definition of detector resolution and efficiency.">Par02DetectorParametrisation</a> : a simple class used to provide the detector resolution and efficiency, according to the type of detector: tracker, electromagnetic calorimeter, hadronic calorimeter. There are 3 choices: CMS-like (default), ALEPH-like and ATLAS-like. The efficiency is currently set to 1.0 in all cases and not used.</li>
<li><a class="el" href="../../d5/dbf/classPar02Smearer.html" title="Smearing of the particle momentum or energy.">Par02Smearer</a> : a simple class that does the gaussian smearing, either of the momentum (in the tracker detector) or in energy (in the electromagnetic or hadronic calorimeter).</li>
</ul>
<h1><a class="anchor" id="Par02_s5"></a>
Output</h1>
<p>The execution of the program (examplePar02) produces in output, at the end of a run, a Root file, by default named DefaultOutput.root, which contains 3 histograms and one ntuple.</p>
<p>The macro file examplePar02.in specifies one run made of 1000 events each consisting of one 50 GeV electron. By editing the file, one could select alternatively a run made of 1000 events each consisting of one 100 GeV muon, or a run made of 1000 events each consisting of one 20 GeV pion- .</p>
<p>See the class <a class="el" href="../../db/daa/classPar02Output.html" title="Handling the saving to the file.">Par02Output</a> for the definition of the 3 histograms and the ntuples. Here is a quick summary:</p><ul>
<li>histogram of the ratio of the momentum smeared and the original momentum in the tracker (for primary charged particles);</li>
<li>histogram of the ratio of the smeared energy deposited and the original energy at the entrance in the electromagnetic calorimeter (for primary electrons, positrons and gammas);</li>
<li>histogram of the ratio of the smeared energy deposited and the original energy at the entrance in the hadronic calorimeter (for primary hadrons);</li>
<li>ntuple containing the "Monte-Carlo true" information regarding the primary, and the resolution, efficiency, smeared momentum (tracker), smeared energy (calorimeter) and impact position (calorimeter) of each subdetector (tracker, electromagnetic calorimeter, hadronic calorimeter) where the primary is parametrised (tracker and electromagnetic calorimeter in the case of primary electrons, positrons and gammas; tracker and hadronic calorimeter in the case of primary hadrons; tracker only for all other primary charged particles, e.g. muons).</li>
</ul>
<p>Note:</p><ul>
<li>you do not need to have the Root package available to run this example, but you need it if you want to look at the histograms and the ntuple contained in the Root output file;</li>
<li>because the class <a class="el" href="../../db/daa/classPar02Output.html" title="Handling the saving to the file.">Par02Output</a> is a singleton, this example must be run in sequential mode, not in multi-threaded mode;</li>
<li>sensitive detectors and hits are not used in this example.</li>
</ul>
<h1><a class="anchor" id="Par02_s6"></a>
How to build and run the example</h1>
<ul>
<li>You need to have built the Geant4 persistency/gdml module by having set the -DGEANT4_USE_GDML=ON flag during the CMAKE configuration step, as well as the -DXERCESC_ROOT_DIR=&lt;path_to_xercesc&gt; flag pointing to the path where the XercesC XML parser package is installed in your system.</li>
<li>Compile and link to generate the executable (in your CMAKE build directory): <pre class="fragment">  %  make
</pre></li>
<li>Execute the application: <pre class="fragment">  %  examplePar02  examplePar02.in
</pre> which produces one Root file: DefaultOutput.root . </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
