<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example P02</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example P02 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="P02_s1"></a>
General description</h1>
<p>This example shows how to store in a binary file and how to read back the geometry tree using the 'reflection' technique for persistency provided by the Reflex tool also included in ROOT. The Reflex tool allows to create a dictionary for the geometry classes, making then possible to save the entire tree in a .root file. <br  />
</p>
<p>The provided makefile produces the executable: 'exampleP02'. In order to run it one has to specify the argument, either 'write' or 'read'. In the first case the geometry is instaciated in the standard way and then saved into the root file (geo.root). In the second case, the geometry is read from geo.root file.</p>
<h1><a class="anchor" id="P02_s2"></a>
Building and running the example</h1>
<p>This examples requires the ROOT toolkit of version 6 to be installed. The provided CMake file checks for the existence of the package and its version. Once the CMake configuration has been succesfully done, the executable for this example should be built using make (in your CMake build directory): </p><pre class="fragment">make
</pre><h1><a class="anchor" id="P02_s3"></a>
Remark on dictionary generation</h1>
<p>The dictionary is generated by ${ROOTSYS}/bin/genreflex tool. The header file including headers for all the classes we want to generate the dictionary for should be given as argument. Additionally, a so called selection file (xml) should be provided (with -s flag) to the genreflex tool (see the GNUmakefile). The role of this file is to specify which classes we want to generate the dictionary for. The selection file for our dictionary is in xml/ directory. Please refer to genreflex manual for more details concerning the usage of that tool. <br  />
</p>
<p>Concerning generating dictionary for the Geant4 objects, there are also two technical remarks that need to be made here. The Reflex tool requires all the templated classes to be explicitely used somewhere in the included header files in order for the generation of the dictionary to be possible. For those templated classes for which it is not the case, the problem can be very easily solved by instaciating them in the headerfile which is given to genreflex (see includes/ExP02Classes.hh) as argument. <br  />
 The second remark is that there is an unfortunate clash of names as far as <a class="el" href="../../d5/d72/classG4String.html">G4String</a> class is concerned. The header of <a class="el" href="../../d5/d72/classG4String.html">G4String</a> class defines __G4String which happens to be the name of a variable used within the generated dictionary code. The solution for that is to do #undef __G4String in <a class="el" href="../../d7/dec/ExP02Classes_8hh.html" title="Declaration of the classes for generating dictionaries.">include/ExP02Classes.hh</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
