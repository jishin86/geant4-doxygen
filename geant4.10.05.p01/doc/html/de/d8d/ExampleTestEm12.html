<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example TestEm12</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example TestEm12 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How to plot a depth dose profile in spherical geometry. <br  />
</p>
<h1><a class="anchor" id="TestEm12_s1"></a>
GEOMETRY DEFINITION</h1>
<p>The geometry consists of a single sphere of an homogenous material. Optionally, the sphere can be divided in thin shells.</p>
<p>3 parameters define the geometry :</p><ul>
<li>the material of the sphere,</li>
<li>the radius of the sphere (absorRadius),</li>
<li>the number of shells (nbOfLayers)</li>
</ul>
<p>In addition a transverse uniform magnetic field can be applied.</p>
<p>The default geometry is constructed in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class, but all of the above parameters can be changed interactively via the commands defined in the <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm12_s2"></a>
PHYSICS LIST</h1>
<p>Physics Lists are based on modular design. Several modules are instantiated:</p><ol type="1">
<li>Transportation</li>
<li>EM physics</li>
<li>Decays</li>
<li><a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> - for step limitation</li>
</ol>
<p>The following options for EM physics using builders from physics_lists sub-package are available:</p><ul>
<li>"emstandard_opt0" recommended standard EM physics for LHC</li>
<li>"emstandard_opt1" best CPU performance standard physics for LHC</li>
<li>"emstandard_opt2" similar fast simulation</li>
<li>"emstandard_opt3" best standard EM options - analog to "local" above</li>
<li>"emstandard_opt4" best current advanced EM options standard + lowenergy</li>
<li>"emstandardWVI" standard EM physics and WentzelVI multiple scattering</li>
<li>"emstandardSS" standard EM physics and single scattering model</li>
<li>"emstandardGS" standard EM physics and Goudsmit-Saunderson multiple scatt.</li>
<li>"emlivermore" low-energy EM physics using Livermore data</li>
<li>"empenelope" low-energy EM physics implementing Penelope models</li>
<li>"emlowenergy" low-energy EM physics implementing experimental low-energy models</li>
<li>"dna" process and models for Geant4-DNA</li>
<li>"dna_opt1" process and models for Geant4-DNA</li>
<li>"dna_opt2" process and models for Geant4-DNA</li>
<li>"dna_opt3" process and models for Geant4-DNA</li>
<li>"dna_opt4" process and models for Geant4-DNA</li>
<li>"dna_opt5" process and models for Geant4-DNA</li>
<li>"dna_opt6" process and models for Geant4-DNA</li>
<li>"dna_opt7" process and models for Geant4-DNA</li>
</ul>
<p>A local builder, <a class="el" href="../../d7/d78/classPhysListEmStandard.html">PhysListEmStandard</a> "local" (similar to opt0) is also available.</p>
<p>Physics lists and options can be (re)set with UI commands</p>
<p>Please, notice that options set through <a class="el" href="../../d7/d22/classG4EmProcessOptions.html">G4EmProcessOptions</a> are global, eg for all particle types. In G4 builders, it is shown how to set options per particle type.</p>
<h1><a class="anchor" id="TestEm12_s3"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic consists of a single particle randomly shot at the centre of the sphere. The type of the particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can be changed via the G4 built-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example).</p>
<p>In addition one can deactivate the randomness of the direction of the incident particle. The corresponding interactive command is built in <a class="el" href="../../d2/df6/classPrimaryGeneratorMessenger.html">PrimaryGeneratorMessenger</a> class.</p>
<p>A RUN is a set of events.</p>
<h1><a class="anchor" id="TestEm12_s4"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the main () (see <a class="el" href="../../d4/d4f/TestEm12_8cc.html" title="Main program of the electromagnetic/TestEm12 example.">TestEm12.cc</a>). The initialisation of the drawing is done via the commands /vis/... in the macro vis.mac. To get visualisation: </p><pre class="fragment">&gt; /control/execute vis.mac
</pre><p>The detector has a default view which is a longitudinal view of the box.</p>
<p>The tracks are drawn at the end of event, and erased at the end of run. Optionally one can choose to draw all particles, only the charged ones, or none. This command is defined in <a class="el" href="../../d9/dc4/classEventActionMessenger.html">EventActionMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm12_s5"></a>
HOW TO START ?</h1>
<ul>
<li>Execute TestEm12 in 'batch' mode from macro files <pre class="fragment">% TestEm12   run01.mac
</pre></li>
<li>Execute TestEm12 in 'interactive mode' with visualization <pre class="fragment">% TestEm12
....
Idle&gt; type your commands
....
Idle&gt; exit
</pre></li>
</ul>
<h1><a class="anchor" id="TestEm12_s6"></a>
TRACKING and STEP MAX</h1>
<p>TestDm12 computes the total energy deposited along the trajectory of the incident particle : the so-called longitudinal energy profile, or depth dose distribution. The energy deposited (edep) is randomly distributed along the step (see <a class="el" href="../../d8/db9/classSteppingAction.html">SteppingAction</a>).</p>
<p>In order to control the accuracy of the deposition, the maximum step size of charged particles is computed automatically from the binning of histograms 1 and 8 (see <a class="el" href="../../d7/df6/classRunAction.html" title="Run action class.">RunAction</a>).</p>
<p>As an example, this limitation is implemented as a 'full' process : see <a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> class and its messenger. The '<a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> process' is registered in the Physics List.</p>
<p><a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> is evaluated in RunAction::BeginOfRun() and passed to the <a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> process. A boolean UI command allows to deactivate this mechanism. Another UI command allows to define directly a stepMax value.</p>
<h1><a class="anchor" id="TestEm12_s7"></a>
HISTOGRAMS</h1>
<p>Testem12 has several predefined 1D histograms :</p>
<ul>
<li>1 : energy profile dE/dr (in MeV/mm per event)</li>
<li>2 : total energy deposited in the absorber</li>
<li>3 : total track length of the primary track</li>
<li>4 : step size of the primary track <br  />
</li>
<li>5 : projected range of the primary track</li>
<li>6 : total track length of charged secondary tracks</li>
<li>7 : step size of charged secondary tracks <br  />
</li>
<li>8 : normalized energy profile d(E/E0)/d(r/r0), where r0 is the range of the primary particle of energy E0</li>
</ul>
<p>The histograms are managed by G4AnalysisManager class and its messenger. The histos can be individually activated with the command : </p><pre class="fragment">/analysis/h1/set id nbBins  valMin valMax unit 
</pre><p> where unit is the desired unit for the histo (MeV or keV, deg or mrad, etc..)</p>
<p>One can control the name of the histograms file with the command: </p><pre class="fragment">/analysis/setFileName  name  (default testem12)
</pre><p>It is possible to choose the format of the histogram file : root (default), xml, csv, by using namespace in HistoManager.hh <br  />
</p>
<p>It is also possible to print selected histograms on an ascii file: </p><pre class="fragment">/analysis/h1/setAscii id
</pre><p> All selected histos will be written on a file name.ascii (default testem12) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
