<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example TestEm16</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example TestEm16 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Simulate synchrotron radiation</p>
<h1><a class="anchor" id="TestEm16_s1"></a>
GEOMETRY DEFINITION</h1>
<p>The geometry consists of a single block of a homogenous material.</p>
<p>Two parameters define the geometry :</p><ul>
<li>the material of the box,</li>
<li>the (full) size of the box. The default is 500 m of vacuum.</li>
</ul>
<p>A transverse uniform magnetic field can be applied.</p>
<p>The default geometry is constructed in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class, but all of the above parameters can be changed interactively via the commands defined in the <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm16_s2"></a>
PHYSICS LIST</h1>
<p>The particle list is the one of novice/exampleN03 and <a class="el" href="../../d6/ded/ExampleTestEm6.html">Example TestEm6</a> with in addition synchrotron radiation. To make the synchrotron radiation easily visible, a very low pressure "vaccuum" and a magnetic field of by default 1 Tesla in z-direction is used.</p>
<h1><a class="anchor" id="TestEm16_s3-"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic consists of a single particle which hits the block perpendicular to the input face. The type of the particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can changed via the G4 build-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example). The default is an positron of 10 GeV.</p>
<p>In addition one can choose randomly the impact point of the incident particle. The corresponding interactive command is built in <a class="el" href="../../d2/df6/classPrimaryGeneratorMessenger.html">PrimaryGeneratorMessenger</a> class.</p>
<p>A RUN is a set of events.</p>
<h1><a class="anchor" id="TestEm16_s4"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the main () (see <a class="el" href="../../db/db4/TestEm16_8cc.html" title="Main program of the electromagnetic/TestEm16 example.">TestEm16.cc</a>). The initialisation of the drawing is done via the command </p><pre class="fragment">&gt; /control/execute vis.mac
&gt; /run/beamOn 1
</pre><p>The detector has a default view which is a longitudinal view of the box.</p>
<p>The tracks are drawn at the end of event, and erased at the end of run. Optionaly one can choose to draw all particles, only the charged one, or none. This command is defined in <a class="el" href="../../d9/dc4/classEventActionMessenger.html">EventActionMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm16_s5"></a>
PHYSICS DEMO</h1>
<p>The particle's type and the physic processes which will be available in this example are set in <a class="el" href="../../d2/daa/classPhysicsList.html">PhysicsList</a> class.</p>
<p>In addition a build-in interactive command (/process/inactivate proname) allows to activate/inactivate the processes one by one.</p>
<p>The threshold for producing secondaries can be changed. eg: </p><pre class="fragment"> /run/particle/setCut 100 micrometer
 /run/initialize
</pre><p>To visualize the Synchrotron radiation : </p><pre class="fragment">/control/execute vis.mac
</pre><h1><a class="anchor" id="TestEm16_s6-"></a>
HOW TO START ?</h1>
<ul>
<li>Execute Test in 'batch' mode from macro files <pre class="fragment">% TestEm16    run01.mac
</pre></li>
<li>Execute Test in 'interactive mode' with visualization <pre class="fragment">% TestEm16
        ....
Idle&gt; type your commands
        ....
Idle&gt; exit
</pre></li>
</ul>
<h1><a class="anchor" id="TestEm16_s7"></a>
TRACKING : stepMax and setMaxStepLength</h1>
<p>In order to control the accuracy of the deposition, the user can limit 'by hand' the maximum step size stepMax of charged particles.</p>
<p>The maximum tracking step length for computing of magnetic field lines is by default set to 1 km. Synchrotron radiation in very weak magnetic fields of the order of 1 Gauss may require longer pathlength. This can be achieved with using setMaxStepLength like </p><pre class="fragment">/testem/tracking/setMaxStepLength 100 km
</pre><h1><a class="anchor" id="TestEm16_s8"></a>
HISTOGRAMS</h1>
<p>TestEm16 produces 3 histograms which illustrate synchrotron radiation. The photon energy spectrum (photons / energy bin) and the power spectrum (photon spectrum weighted with the photon energy) and a histogram of the path length between photon radiation is produced.</p>
<p>The histograms are managed by G4AnalysisManager and its messenger, <a class="el" href="../../d9/ddd/classHistoMessenger.html">HistoMessenger</a>.</p>
<p>The histos can be activated individually with the command : </p><pre class="fragment">/analysis/h1/set id nbBins valMin valMax unit
</pre><p> where 'unit' is the desired unit for the histo (MeV or KeV, cm or mm, etc..)</p>
<p>One can control the name of the histograms file with the command: </p><pre class="fragment">/analysis/setFileName  name  (default testem16)
</pre><p>It is possible to choose the format of the histogram file : root (default), xml, csv, by using namespace in HistoManager.hh <br  />
</p>
<p>It is also possible to print selected histograms on an ascii file: </p><pre class="fragment">/analysis/h1/setAscii id
</pre><p> All selected histos will be written on a file name.ascii (default testem16) </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
