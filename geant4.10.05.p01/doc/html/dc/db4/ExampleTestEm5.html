<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example TestEm5</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example TestEm5 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How to study the transmission, absorption and reflection of particles through a single, thin or thick, layer of material. In particular, the effects of the multiple scattering can be plotted. <br  />
</p>
<h1><a class="anchor" id="TestEm5_s1"></a>
GEOMETRY DEFINITION</h1>
<p>The "absorber" is a box made of a given material. <br  />
</p>
<p>Three parameters define the absorber :</p><ul>
<li>the material of the absorber,</li>
<li>the thickness of an absorber,</li>
<li>the transverse size of the absorber (the input face is a square).</li>
</ul>
<p>A volume "World" contains the "absorber".</p>
<p>In addition a transverse uniform magnetic field can be applied.</p>
<p>The default geometry is constructed in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class, but all the parameters can be changed via commands defined in the <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> class. The parameters of the "World" can be changed, too. However, if World material is not set to vacuum, the plots 10-&gt;43 below may be not pertinent.</p>
<h1><a class="anchor" id="TestEm5_s2"></a>
PHYSICS LIST</h1>
<p>Physics lists are based on modular design. Several modules are instantiated:</p><ol type="1">
<li>Transportation</li>
<li>EM physics</li>
<li>Decays</li>
<li><a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> - for step limitation</li>
</ol>
<p>EM physics builders can be local (eg. in this example) or from G4 kernel physics_lists subdirectory.</p>
<p>Local physics builders: <br  />
</p><ul>
<li>"local" standard EM physics with current 'best' options setting these options are explicited in <a class="el" href="../../d7/d78/classPhysListEmStandard.html">PhysListEmStandard</a></li>
<li>"standardSSM" standard EM physics with alternative single Coulomb scattering model instead of multiple scattering.</li>
</ul>
<p>From geant4/source/physics_lists/builders:</p><ul>
<li>"emstandard_opt0" recommended standard EM physics for LHC</li>
<li>"emstandard_opt1" best CPU performance standard physics for LHC</li>
<li>"emstandard_opt2" similar fast simulation</li>
<li>"emstandard_opt3" best standard EM options - analog to "local" above</li>
<li>"emstandard_opt4" best current advanced EM options standard + lowenergy</li>
<li>"emstandardWVI" standard EM physics and WentzelVI multiple scattering</li>
<li>"emstandardSS" standard EM physics and single scattering model</li>
<li>"emlivermore" low-energy EM physics using Livermore data</li>
<li>"empenelope" low-energy EM physics implementing Penelope models</li>
<li>"emlowenergy" low-energy EM physics implementing experimental low-energy models</li>
</ul>
<p>Physics lists and options can be (re)set with UI commands</p>
<p>Please, notice that options set through <a class="el" href="../../d7/d22/classG4EmProcessOptions.html">G4EmProcessOptions</a> are global, eg for all particle types. In G4 builders, it is shown how to set options per particle type.</p>
<h1><a class="anchor" id="TestEm5_s3"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic consists of a single particle which hits the absorber perpendicular to the input face. The type of the particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can be changed via the G4 build-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example).</p>
<p>In addition one can choose randomly the impact point of the incident particle. The interactive command is built in <a class="el" href="../../d2/df6/classPrimaryGeneratorMessenger.html">PrimaryGeneratorMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm5_s4"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the main () (see <a class="el" href="../../d1/de9/TestEm5_8cc.html" title="Main program of the electromagnetic/TestEm5 example.">TestEm5.cc</a>). The initialisation of the drawing is done via the commands in vis.mac In interactive session: </p><pre class="fragment"> PreInit or Idle &gt; /control/execute vis.mac
</pre><p>The example has a default view which is a longitudinal view of the detector.</p>
<p>The tracks are drawn at the end of event, and erased at the end of run. Optionally one can choose to draw all particles, only the charged, or none. This command is defined in <a class="el" href="../../d9/dc4/classEventActionMessenger.html">EventActionMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm5_s5"></a>
TRACKING</h1>
<p>During the tracking, one can keep or not the secondaries : see <a class="el" href="../../d4/d47/classStackingAction.html" title="Stacking action class : manage the newly generated particles.">StackingAction</a> class and its Messenger (<a class="el" href="../../d1/ddf/classStackingMessenger.html">StackingMessenger</a>). One can also limit 'by hand' the step lenght of the particle. As an example, this limitation is implemented as a 'full' process : see <a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> class and its Messenger. The '<a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> process' is registered in the Physics List.</p>
<h1><a class="anchor" id="TestEm5_s6"></a>
DETECTOR RESPONSE</h1>
<p>At the end of a run, from the histogram(s), one can study different physics quantities such as :</p><ul>
<li>energy deposit in the absorber,</li>
<li>energy spectrum of secondaries at creation,</li>
<li>energy spectrum and angle distribution of particles at exit,</li>
<li>transmission and backscattering coefficients,</li>
<li>...</li>
</ul>
<h1><a class="anchor" id="TestEm5_s7"></a>
List of the built-in histograms</h1>
<p>The test contains more than 60 built-in 1D histograms, which are managed by G4AnalysisManager class and its Messenger. The histos can be individually activated with the command : </p><pre class="fragment">/analysis/h1/set id nbBins  valMin valMax unit 
</pre><p> where unit is the desired unit for the histo (MeV or keV, deg or mrad, etc..) (see the macros xxxx.mac).</p>
<ul>
<li>1 : "energy deposit in absorber"</li>
<li>2 : "energy of charged secondaries at creation"</li>
<li>3 : "energy of neutral secondaries at creation"</li>
<li>4 : "energy of charged at creation (log10(Ekin))"</li>
<li>5 : "energy of neutral at creation (log10(Ekin))"</li>
<li>6 : "x_vertex of charged secondaries (all)"</li>
<li>7 : "x_vertex of charged secondaries (not absorbed)"</li>
<li>10 : "(transmit, charged) : kinetic energy at exit of world"</li>
<li>11 : "(transmit, charged) : ener fluence: dE(MeV)/dOmega" <br  />
</li>
<li>12 : "(transmit, charged) : space angle dN/dOmega"</li>
<li>13 : "(transmit, charged) : projected angle at exit of world"</li>
<li>14 : "(transmit, charged) : projected position at exit of world"</li>
<li>15 : "(transmit, charged) : radius at exit of world" <br  />
</li>
<li>20 : "(transmit, neutral) : kinetic energy at exit of world"</li>
<li>21 : "(transmit, neutral) : ener fluence: dE(MeV)/dOmega" <br  />
</li>
<li>22 : "(transmit, neutral) : space angle dN/dOmega"</li>
<li>23 : "(transmit, neutral) : projected angle at exit of world"</li>
<li>30 : "(reflect , charged) : kinetic energy at exit of world"</li>
<li>31 : "(reflect , charged) : ener fluence: dE(MeV)/dOmega" <br  />
</li>
<li>32 : "(reflect , charged) : space angle dN/dOmega"</li>
<li>33 : "(reflect , charged) : projected angle at exit of world"</li>
<li>40 : "(reflect , neutral) : kinetic energy at exit of world"</li>
<li>41 : "(reflect , neutral) : ener fluence: dE(MeV)/dOmega" <br  />
</li>
<li>42 : "(reflect , neutral) : space angle dN/dOmega"</li>
<li>43 : "(reflect , neutral) : projected angle at exit of world"</li>
<li>50 : "energy of Auger e- at creation"</li>
<li>51 : "energy of fluorescence gamma at creation"</li>
<li>52 : "energy of Auger e- at creation (log scale)"</li>
<li>53 : "energy of fluorescence gamma at creation (log scale)"</li>
<li>54 : "energy of PIXE Auger e- at creation"</li>
<li>55 : "energy of PIXE gamma at creation"</li>
<li>56 : "energy of PIXE Auger e- at creation (log scale)"</li>
<li>57 : "energy of PIXE gamma at creation (log scale)"</li>
<li>58 : "energy of G4DNA Auger e- at creation"</li>
<li>59 : "energy of G4DNA gamma at creation"</li>
<li>60 : "energy of G4DNA Auger e- at creation (log scale)"</li>
<li>61 : "energy of G4DNA gamma at creation (log scale)"</li>
</ul>
<p>The histograms can be viewed using ROOT or PAW.</p>
<p>One can control the name of the histograms file with the command: </p><pre class="fragment">/analysis/setFileName  name  (default testem5)
</pre><p>It is possible to choose the format of the histogram file : root (default), hbook, xml, csv, by using namespace in HistoManager.hh</p>
<p>It is also possible to print selected histograms on an ascii file: </p><pre class="fragment">/analysis/h1/setAscii id
</pre><p> All selected histos will be written on a file name.ascii (default testem5)</p>
<h2><a class="anchor" id="TestEm5_subs1"></a>
Using hbook format</h2>
<p>Need a special treatement : the Cern Library must be installed and the environment variable CERNLIB correctly set. Then, <em>before</em> compiling, activate G4_USE_HBOOK in GNUmakefile and g4hbook.hh in HistoManager.hh</p>
<h1><a class="anchor" id="TestEm5_s8"></a>
GEANT4/GEANT3/DATA COMPARISON</h1>
<p>A Geant4/Geant3/exp. data comparison is given here for a few cases. These cases can be classified as follow:</p><ul>
<li>e-/e+ incident particles versus protons and others.</li>
<li>3 energy regimes: low: &lt; 1MeV; medium: 1MeV -&gt; few 10MeV; high: &gt; 100MeV</li>
</ul>
<p>We indicate here the corresponding macros. </p><pre> 
              | low energy   |  medium energy   |  high energy
        --------------------------------------------------------
              | <a class="el" href="../../de/df6/acosta_8mac.html">acosta.mac</a>   |                  |
        e-+   | berger.mac   |  <a class="el" href="../../d6/d0c/hanson_8mac.html">hanson.mac</a>      |
              | <a class="el" href="../../dd/d2a/hunger_8mac.html">hunger.mac</a>   |  <a class="el" href="../../de/da8/kulchi_8mac.html">kulchi.mac</a>      |
              | tavola.mac   |                  |
        --------------------------------------------------------
        others| <a class="el" href="../../d0/d9e/bichsel_8mac.html">bichsel.mac</a>  |  <a class="el" href="../../d9/d06/vincour_8mac.html">vincour.mac</a>     |  <a class="el" href="../../d7/d1c/shen1_8mac.html">shen1.mac</a> <a class="el" href="../../d2/d45/shen2_8mac.html">shen2.mac</a>
              |              |  <a class="el" href="../../d0/dfb/gottsch_8mac.html">gottsch.mac</a>     |  <a class="el" href="../../dd/d74/tramu_8mac.html">tramu.mac</a>
        --------------------------------------------------------
</pre><p> The relevant part of the GEANT3 code is in the subdirectory geant3 together with the xxxx.dat input files.</p>
<h1><a class="anchor" id="TestEm5_s9"></a>
HOW TO START ?</h1>
<ul>
<li>Execute TestEm5 in 'batch' mode from macro files e.g. <pre class="fragment">% $(G4INSTALL)/bin/$(G4SYSTEM)/TestEm5   myMacro.mac
</pre></li>
<li>Execute TestEm5 in 'interactive' mode with visualization e.g. <pre class="fragment">% $(G4INSTALL)/bin/$(G4SYSTEM)/TestEm5
</pre> Then type your commands, for instance : <pre class="fragment">Idle&gt; control/execute vis.mac
Idle&gt; run/beamOn 5
....
</pre> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
