<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example transforms</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example transforms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example illustrates various ways to place a volume.</p>
<p>There are two <a class="el" href="../../dd/d4f/classG4PVPlacement.html">G4PVPlacement</a> constructors. One uses a direct rotation matrix, via G4Transform3D class. The other uses an inverse rotation matrix. The rotation matrices themselves, direct or inverse, can be explicitely computed by users, or built with various G4 build-in transformations methods, like axial rotations.</p>
<h1><a class="anchor" id="Transforms_s1"></a>
Geometry construction</h1>
<p>Two <a class="el" href="../../d0/d50/classG4Trd.html">G4Trd</a> volumes (daughters) are placed within a <a class="el" href="../../d0/d28/classG4Tubs.html">G4Tubs</a> (mother), in such a way that their z_axis are in the mother xy plane. To see the picture, run the example in interactive mode.</p>
<p>The various ways of placement are implemented in the <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class in the following private functions:</p>
<ul>
<li><a class="el" href="../../dc/d5b/classDetectorConstruction.html#af6a110269d63eb74f663c7834261a98c">PlaceWithDirectMatrix() </a> <br  />
 This method is using <a class="el" href="../../dd/d4f/classG4PVPlacement.html">G4PVPlacement</a> with G4Transform3D, which is constructed from a rotation matrix (G4RotationMatrix) and a translation vector (G4ThreeVector). The rotation and translation in this case represent the active transformation: the solid itself is moved by rotating and translating it to bring it into the system of coordinates of the mother volume.<br  />
 The rotation matrix is defined via the daughter frame axes with respect to the mother frame.<br  />
<br  />
</li>
<li><a class="el" href="../../dc/d5b/classDetectorConstruction.html#aa12d04ce812b5cc30263f044820ae976">PlaceWithInverseMatrix() </a> <br  />
 This method is using <a class="el" href="../../dd/d4f/classG4PVPlacement.html">G4PVPlacement</a> with a rotation matrix (G4RotationMatrix) and a translation vector (G4ThreeVector). The rotation Matrix represents the rotation of the reference frame of the considered volume relatively to its mother volumeâ€™s reference frame. The translation Vector represents the translation of the current volume in the reference frame of its mother volume. <br  />
 If compared to the previous construct, the transformation in this case is generated by specifying the same translation with respect to its mother volume and the inverse of the rotation matrix. <br  />
 The rotation matrix is defined again via the daughter frame axes with respect to the mother frame. <br  />
<br  />
</li>
<li><a class="el" href="../../dc/d5b/classDetectorConstruction.html#a33b06807908f6a2eb353b9d6f15d7065">PlaceWithAxialRotations() </a> <br  />
 This method is using <a class="el" href="../../dd/d4f/classG4PVPlacement.html">G4PVPlacement</a> with G4Transform3D again, but in difference from PlaceWithDirectMatrix(), the rotation matrix is defined via rotate[X,Y,Z]() member functions of G4RotationMatrix. <br  />
<br  />
</li>
<li><a class="el" href="../../dc/d5b/classDetectorConstruction.html#a571c225c922301d60ede1719ccaade65">PlaceWithEulerAngles() </a> <br  />
 This method is using <a class="el" href="../../dd/d4f/classG4PVPlacement.html">G4PVPlacement</a> with G4Transform3D again, but with the rotation matrix is defined via Euler angles. <br  />
<br  />
</li>
<li><a class="el" href="../../dc/d5b/classDetectorConstruction.html#a76ad70d248fc275a1abad1b9d4e2aba2">PlaceWithReflections() </a> <br  />
 In this method, in addition to two positions defined via "PlaceWithAxialRotations" method, two more positions including reflection symmetry are defined. When reflections are present in geometry, the placements have to be applied via <a class="el" href="../../d1/db6/classG4ReflectionFactory.html#a5207685994bad3fd96e31d403026d0a4">G4ReflectionFactory::Place()</a> method, where a G4Transform3D with reflection can be used.</li>
</ul>
<p>These functions are then called from the <a class="el" href="../../d1/d8a/namespacepyExN03geom.html#a0dad4872b56e32fad4c28deeb4dc252c">Construct()</a> function. All methods define exactly same geometry except for the placement with reflection where trapezoids are placed with their symmetry axis in parallel with z-axis in order to make easier to check reflection visually.</p>
<p>The method of placement can be selected interactively via the command (see <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> and transforms.in): </p><pre class="fragment">/placement/setMethod method
   where method = WithDirectMatrix, WithInverseMatrix, WithAxialRotations,
                  WithEulerAngles, WithReflections
</pre><h1><a class="anchor" id="Transforms_s2"></a>
Physics list</h1>
<p>PhysicsList.cc defines only geantino and transportation process.</p>
<h1><a class="anchor" id="Transforms_s3"></a>
Primary generator</h1>
<p>Default kinematic is a geantino, at coordinate origin. Can be changed with particleGun commands.</p>
<h1><a class="anchor" id="Transforms_s4"></a>
Physics</h1>
<p>No physics; only transportation.</p>
<h1><a class="anchor" id="Transforms_s5"></a>
Visualisation</h1>
<p>Visualization Manager is set in the <a class="el" href="../../d8/d8f/genwindef_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a>. Initialisation of the drawing is done via the commands /vis/.. in the macro vis.mac. This macro is automatically read from the main in case of interactive running mode.</p>
<h1><a class="anchor" id="Transforms_s6"></a>
How to start ?</h1>
<ul>
<li>Execute transforms in 'interactive mode' with visualization <pre class="fragment">% transforms
....
Idle&gt;   ---&gt; type your commands. For instance:
Idle&gt; /placement/setMethod WithInverseMatrix
Idle&gt; /tracking/verbose 1
Idle&gt; /run/beamOn 1
....                            
Idle&gt; exit
</pre> <br  />
</li>
<li>Execute transforms in 'batch' mode from macro files <pre class="fragment">% transforms   transforms.in    
</pre> <br  />
 </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
