<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geant4: Example TestEm2</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Geant4
   &#160;<span id="projectnumber">10.05.p01</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Example TestEm2 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>How to do shower profiles in an homogenous medium, with virtual voxelisation.</p>
<h1><a class="anchor" id="TestEm2_s1"></a>
GEOMETRY DEFINITION</h1>
<p>The geometry consists of a cylinder of homogenous material.</p>
<p>The default geometry is constructed in <a class="el" href="../../dc/d5b/classDetectorConstruction.html" title="Simple detector construction with a box volume placed in a world.">DetectorConstruction</a> class, but all of the above parameters can be modified interactively via the commands defined in the <a class="el" href="../../d6/d1f/classDetectorMessenger.html" title="Messenger class that defines commands for DetectorConstruction.">DetectorMessenger</a> class.</p>
<p>Material can be choosen: Air Water lAr Al Fe BGO PbWO4 Pb. eg: </p><pre class="fragment">/testem/det/setMat PbWO4
</pre><p>The cylinder is virtually sliced longitudinally (slice) and radially (ring). The size of the slices and rings are expressed in radiation length units and can be changed. eg: </p><pre class="fragment">/testem/det/setLbin 20   1.    ---&gt; 20 slices of 1. radl
/testem/det/setRbin  5   0.25  ---&gt;  5 rings of 0.25 radl
/testem/det/update             ---&gt; rebuild the geometry
</pre><p> (MaxBin = 500 in both directions) <br  />
</p>
<p>An uniform magnetic field along the cylinder axis can be set. eg: </p><pre class="fragment">/testem/det/setField 5 tesla 
</pre><h1><a class="anchor" id="TestEm2_s2"></a>
PHYSICS LISTS</h1>
<p>Physics lists are based on modular design. Several modules are instantiated:</p><ol type="1">
<li>Transportation</li>
<li>EM physics</li>
<li>Decays</li>
<li><a class="el" href="../../dd/dcc/classStepMax.html">StepMax</a> - for step limitation</li>
</ol>
<p>EM physics builders can be local (eg. in this example) or from G4 kernel physics_lists subdirectory.</p>
<p>Local physics builders:</p><ul>
<li>"local" standard EM physics with current 'best' options setting. these options are explicited in <a class="el" href="../../d7/d78/classPhysListEmStandard.html">PhysListEmStandard</a></li>
</ul>
<p>From geant4/source/physics_lists/builders: <br  />
</p><ul>
<li>"emstandard_opt0" recommended standard EM physics for LHC</li>
<li>"emstandard_opt1" best CPU performance standard physics for LHC</li>
<li>"emstandard_opt2" similar fast simulation</li>
<li>"emstandard_opt3" best standard EM options - analog to "local" above</li>
<li>"emstandard_opt4" best current advanced EM options standard + lowenergy</li>
<li>"emstandardWVI" standard EM physics and WentzelVI multiple scattering</li>
<li>"emstandardSS" standard EM physics and single scattering model</li>
<li>"emlivermore" low-energy EM physics using Livermore data</li>
<li>"empenelope" low-energy EM physics implementing Penelope models</li>
<li>"emlowenergy" low-energy EM physics implementing experimental low-energy models</li>
</ul>
<p>Physics lists and options can be (re)set with UI commands</p>
<p>Please, notice that options set through <a class="el" href="../../d7/d22/classG4EmProcessOptions.html">G4EmProcessOptions</a> are global, eg for all particle types. In G4 builders, it is shown how to set options per particle type.</p>
<h1><a class="anchor" id="TestEm2_s3"></a>
AN EVENT : THE PRIMARY GENERATOR</h1>
<p>The primary kinematic consists of a single particle which hits the cylinder perpendicular to the input face. The type of the particle and its energy are set in the <a class="el" href="../../d7/d27/classPrimaryGeneratorAction.html" title="The primary generator action class with particle gun.">PrimaryGeneratorAction</a> class, and can changed via the G4 build-in commands of <a class="el" href="../../dc/ded/classG4ParticleGun.html">G4ParticleGun</a> class (see the macros provided with this example).</p>
<p>A RUN is a set of events.</p>
<h1><a class="anchor" id="TestEm2_s4"></a>
VISUALIZATION</h1>
<p>The Visualization Manager is set in the <a class="el" href="../../d8/d8f/genwindef_8cc.html#a3c04138a5bfe5d72780bb7e82a18e627">main()</a> (see <a class="el" href="../../dc/d58/TestEm2_8cc.html" title="Main program of the electromagnetic/TestEm2 example.">TestEm2.cc</a>). The initialisation of the drawing is done via the commands /vis/.. in the macro vis.mac. In interactive session: </p><pre class="fragment">PreInit or Idle &gt; /control/execute vis.mac
</pre><p>The detector has a default view which is a longitudinal view of the cylinder.</p>
<p>The tracks are drawn at the end of event, and erased at the end of run. Optionally one can choose to draw all particles, only the charged one, or none. This command is defined in <a class="el" href="../../d9/dc4/classEventActionMessenger.html">EventActionMessenger</a> class.</p>
<h1><a class="anchor" id="TestEm2_s5"></a>
PHYSICS DEMO</h1>
<p>The particle's type and the physics processes which will be available in this example are set in <a class="el" href="../../d2/daa/classPhysicsList.html">PhysicsList</a> class.</p>
<p>In addition a build-in interactive command (/process/inactivate procname) allows to activate/inactivate the processes one by one.</p>
<p>The threshold for producing secondaries can be changed. eg: </p><pre class="fragment">/testem/phys/setCuts 100 microm
/run/initialize
</pre><p>The shower profiles are histogramed, if histograming is activated. They can be also printed with the command /testem/run/verbose 1 <br  />
</p>
<h1><a class="anchor" id="TestEm2_s6"></a>
HOW TO START ?</h1>
<ul>
<li>Execute TestEm2 in 'batch' mode from macro files <pre class="fragment">% TestEm2   run01.mac
</pre></li>
<li>Execute TestEm2 in 'interactive mode' with visualization <pre class="fragment">% TestEm2
....
Idle&gt; type your commands
....
Idle&gt; exit
</pre></li>
</ul>
<h1><a class="anchor" id="TestEm2_s7"></a>
HISTOGRAMS</h1>
<p>TestEm2 produces several histograms:</p>
<p>Content of these histo:</p>
<ul>
<li>1 : energy deposit per event</li>
<li>2 : charged track length per event</li>
<li>3 : neutral track length per event</li>
<li>4 : longitudinal energy profile</li>
<li>5 : rms of longitudinal energy profile <br  />
</li>
<li>6 : cumulated longitudinal energy profile</li>
<li>7 : rms of cumulated longitudinal energy profile</li>
<li>8 : radial energy profile</li>
<li>9 : rms of radial energy profile <br  />
</li>
<li>10 : cumulated radial energy profile</li>
<li>11 : rms of cumulated radial energy profile</li>
</ul>
<p>To define the output file name with histograms, use the UI command : </p><pre class="fragment">/testem/histo/setFileName name
</pre><p>The format of the histogram file can be : root (default), xml, csv, by selecting g4nnn.hh in RunAction.hh </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
